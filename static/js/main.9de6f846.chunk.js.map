{"version":3,"sources":["contexts/CurrentUserContext.js","utils/Auth.js","components/ProtectedRoute.js","components/Logo/Logo.js","components/Header/Header.js","components/Landing/NavTab/NavTab.js","components/Button/Button.js","components/PopupMenu/PopupMenu.js","components/Navigation/Navigation.js","components/Landing/Promo/Promo.js","components/Landing/SectionHeader/SectionHeader.js","components/Landing/AboutProject/AbouProject.js","components/Landing/SectionTitle/SectionTitle.js","components/Landing/Techs/Techs.js","components/Landing/Portfolio/Portfolio.js","images/my-photo.jpg","components/Landing/AboutMe/AboutMe.js","components/Landing/Landing.js","components/Footer/Footer.js","pages/HomePage.js","components/Form/Form.js","components/Input/Input.js","components/SubmitButton/SubmitButton.js","components/SubmitGroup/SubmitGroup.js","hooks/useFormWithValidation.js","pages/Login/Login.js","pages/Register.js","utils/MainApi.js","components/Profile/Profile.js","pages/ProfilePage.js","components/RoundSwitch/RoundSwitch.js","utils/Const.js","components/SearchForm/SearchForm.js","components/Preloader/Preloader.js","components/MoviesCard/MoviesCard.js","components/RoundCheckBox/RoundCheckBox.js","components/MoviesCardList/MoviesCardList.js","utils/MoviesApi.js","utils/MoviesSearch.js","hooks/useDimensions.js","utils/VisualProps.js","components/Movies/Movies.js","pages/MoviesPage.js","components/SavedMovies/SavedMovies.js","pages/SavedMoviesPage.js","pages/NotFound/NotFound.js","pages/App/App.js","index.js"],"names":["CurrentUserContext","React","createContext","BASE_URL","handleResponse","res","ok","json","Promise","reject","status","authorize","email","password","fetch","method","headers","body","JSON","stringify","then","ProtectedRoute","Component","component","props","loggedIn","to","Logo","className","Header","children","NavTab","Button","userClass","buttonType","rest","type","PopupMenu","onClick","handleClose","exact","activeClassName","Navigation","useState","isPopupVisible","setIsPopupVisible","theme","Promo","currentUser","useContext","SectionHeader","AboutProject","SectionTitle","Techs","Portfolio","href","target","rel","AboutMe","src","personPhoto","alt","Landing","Footer","HomePage","Fragment","Form","name","title","onSubmit","Input","isError","errorText","errorId","id","SubmitButton","submitDisabled","disabled","SubmitGroup","errorMessage","submitName","linkDestination","linkName","useFormWithValidation","values","setValues","errors","setErrors","isValid","setIsValid","resetForm","useCallback","newValues","newErrors","newIsValid","handleChange","event","value","validationMessage","closest","checkValidity","Login","setErrorMessage","useEffect","resetMessage","emptyForm","e","preventDefault","onLogin","placeholder","required","pattern","onChange","maxLength","minLength","Register","onRegister","mainApi","baseUrl","this","_baseUrl","_headers","getHeaders","_handleResponse","data","item","movieId","token","localStorage","getItem","Profile","isSubmitDisabled","setIsSubmitDisabled","serverErrorMessage","setServerErrorMessage","condition1","condition2","msgName","msgEmail","patchUserProfile","setTimeout","catch","err","htmlFor","onLogout","ProfilePage","RoundSwitch","checked","isChecked","isDisabled","NOT_FOUND_ERR_BLOCK","SAVED_FILMS_API_BLOCK","SearchForm","searchString","setSearchString","savedFilms","isSwitchOn","onSwitchChange","isSwitchDisabled","Preloader","MoviesCard","movie","image","nameRU","duration","hours","Math","floor","minutes","getMovieDuration","RoundCheckBox","DeleteButton","onDelete","MoviesCardList","moviesList","onSave","handleDelete","isLoading","length","map","moviesCard","saved","MOVIES_URL","moviesApi","a","readMovies","getAllMovies","movies","country","director","year","description","url","trailer","trailerLink","nameEN","thumbnail","formats","resolve","errString","index","checkField","field","toLowerCase","includes","filterMovies","string","foundMovies","filter","c1","c2","c3","c4","c5","addSavedFlag","films","film","savedFilm","savedId","_id","getWindowDimensions","window","width","innerWidth","height","innerHeight","visibleCardsNumbers","1440","total","add","1280","768","480","Movies","setIsLoading","isMoreVisible","setIsMoreVisible","setIsSwitchOn","setIsSwitchDisabled","savedMovies","setSavedMovies","setFoundMovies","showedMovies","setShowedMovies","findErrorMessage","setFindErrorMessage","windowDimensions","setWindowDimensions","handleResize","addEventListener","removeEventListener","useWindowDimensions","visualProps","setVisualProps","visibleCardsNumber","setVisibleCardsNumber","found","foundChecked","fromStorage","parse","getMovies","slice","console","log","getVisualProps","foundFilter","searchMain","removeItem","setItem","handleSaveClick","currentMovie","Error","newFoundMovies","postNewMovie","result","newFilm","newSavedMovies","push","deleteMovie","open","newValue","MoviesPage","SavedMovies","setMoviesList","apiErrorMessage","setApiErrorMessage","visibleMovies","setVisibleMovies","STORAGE_NAME","finally","visible","deletedMovie","newList","newVisible","error","SavedMoviesPage","NotFound","history","goBack","App","setLoggedIn","setCurrentUser","resultMessage","setResultMessage","useHistory","tokenCheck","jwt","resetResultMessage","Provider","path","userEmail","userPassword","resetLoginForm","messageText","auth","userName","resetRegisterForm","ReactDOM","render","StrictMode","basename","process","document","getElementById"],"mappings":"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","file":"static/js/main.9de6f846.chunk.js","sourcesContent":["import React from 'react';\r\n\r\nexport const CurrentUserContext = React.createContext();\r\n","export const BASE_URL = 'https://api.kt3.students.nomoredomains.work';\r\n\r\nexport const handleResponse = (res) => {\r\n  if (res.ok) return res.json();\r\n  return Promise.reject(res.status);\r\n};\r\n\r\nexport const register = (email, password, name) => {\r\n  return fetch(`${BASE_URL}/signup`, {\r\n    method: 'POST',\r\n    headers: {\r\n      'Accept': 'application/json',\r\n      'Content-Type': 'application/json',\r\n    },\r\n    body: JSON.stringify({ email, password, name }),\r\n  })\r\n  .then((res) => handleResponse(res));\r\n};\r\n\r\nexport const authorize = (email, password) => {\r\n  return fetch(`${BASE_URL}/signin`, {\r\n    method: 'POST',\r\n    headers: {\r\n      'Accept': 'application/json',\r\n      'Content-Type': 'application/json'\r\n    },\r\n    body: JSON.stringify({email, password})\r\n  })\r\n  .then((res) => handleResponse(res));\r\n};\r\n\r\nexport const checkToken = (token) => {\r\n  return fetch(`${BASE_URL}/users/me`, {\r\n    method: 'GET',\r\n    headers: {\r\n      'Accept': 'application/json',\r\n      'Content-Type': 'application/json',\r\n      'Authorization': `Bearer ${token}`,\r\n    }\r\n  })\r\n  .then((res) => handleResponse(res));\r\n};\r\n\r\n","import React from 'react';\r\nimport { Route, Redirect } from \"react-router-dom\";\r\n\r\nconst ProtectedRoute = ({ component: Component, ...props  }) => {\r\n  return (\r\n    <Route>\r\n      {\r\n        () => props.loggedIn ? <Component {...props} /> : <Redirect to=\"/\" />\r\n      }\r\n    </Route>\r\n)}\r\n\r\nexport default ProtectedRoute;\r\n","import React from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport './Logo.css';\r\n\r\nconst Logo = () => (\r\n  <Link to=\"/\" className=\"logo gradual-change\"/>\r\n);\r\n\r\nexport default Logo;","import React from 'react';\r\nimport Logo from '../Logo/Logo';\r\nimport './Header.css';\r\n\r\nconst Header = (props) => (\r\n\r\n  <header className=\"Header\">\r\n    <Logo/>\r\n    {props.children}\r\n  </header>\r\n\r\n);\r\n\r\nexport default Header;","import React from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport './NavTab.css';\r\n\r\nconst NavTab = () => (\r\n  <nav className=\"nav-tab\">\r\n    <Link\r\n      to=\"/signup\"\r\n      className=\"nav-tab__btn nav-tab__btn_register gradual-change\"\r\n    >\r\n      Регистрация\r\n    </Link>\r\n\r\n    <Link\r\n      to=\"/signin\"\r\n      className=\"nav-tab__btn nav-tab__btn_login gradual-change\"\r\n    >\r\n      Войти\r\n    </Link>\r\n  </nav>\r\n);\r\n\r\nexport default NavTab;","import React from 'react';\r\nimport './Button.css';\r\n\r\nconst Button = ({ userClass, buttonType, children, ...rest }) => (\r\n  <button\r\n    className={`button gradual-change ${userClass || ''}`}\r\n    type={buttonType || 'button'}\r\n    {...rest}\r\n  >\r\n    { children || '' }\r\n  </button>\r\n);\r\n\r\nexport default Button;","import React from 'react';\r\nimport { NavLink } from 'react-router-dom';\r\nimport Button from '../Button/Button';\r\n\r\nimport './PopupMenu.css';\r\n\r\nfunction PopupMenu(props) {\r\n\r\n  return (\r\n    <div className=\"popup\">\r\n      <div className=\"popup__container\">\r\n\r\n        <Button userClass=\"popup__btn_close\" onClick={props.handleClose}/>\r\n\r\n        <NavLink exact to=\"/\"\r\n          activeClassName=\"popup__link_active\"\r\n          className=\"popup__link popup__link_film\"\r\n        >\r\n          Главная\r\n        </NavLink>\r\n\r\n        <NavLink to=\"/movies\"\r\n          activeClassName=\"popup__link_active\"\r\n          className=\"popup__link popup__link_film\"\r\n        >\r\n          Фильмы\r\n        </NavLink>\r\n\r\n        <NavLink to=\"/saved-movies\"\r\n          activeClassName=\"popup__link_active\"\r\n          className=\"popup__link popup__link_film\"\r\n        >\r\n          Сохранённые фильмы\r\n        </NavLink>\r\n\r\n        <NavLink to=\"/profile\"\r\n          activeClassName=\"popup__link_active\"\r\n          className=\"popup__link popup__link_profile\"\r\n        >\r\n          Аккаунт\r\n        </NavLink>\r\n\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default PopupMenu;","import React, { useState } from 'react';\r\nimport { NavLink } from 'react-router-dom';\r\nimport Button from '../Button/Button';\r\nimport PopupMenu from '../PopupMenu/PopupMenu';\r\nimport './Navigation.css';\r\n\r\nfunction Navigation(props) {\r\n  const [isPopupVisible, setIsPopupVisible] = useState(false);\r\n\r\n  const handleClick = () => {\r\n    setIsPopupVisible(true);\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setIsPopupVisible(false);\r\n  };\r\n\r\n  return (\r\n    <nav className=\"menu gradual-change\">\r\n      <NavLink to=\"/movies\"\r\n        activeClassName=\"menu__link_active\"\r\n        className={`menu__link menu__link_film ${ props.theme ? 'menu__link_film_blue' : ''}`}\r\n      >\r\n        Фильмы\r\n      </NavLink>\r\n\r\n      <NavLink to=\"/saved-movies\"\r\n        activeClassName=\"menu__link_active\"\r\n        className={`menu__link menu__link_film ${ props.theme ? 'menu__link_film_blue' : ''}`}\r\n      >\r\n        Сохранённые фильмы\r\n      </NavLink>\r\n\r\n      <NavLink to=\"/profile\"\r\n        activeClassName=\"menu__link_active\"\r\n        className={`menu__link menu__link_profile ${ props.theme ? 'menu__link_profile_blue' : ''}`}\r\n      >\r\n        Аккаунт\r\n      </NavLink>\r\n\r\n      <Button\r\n        userClass={`menu__button ${ props.theme ? 'menu__button_blue' : ''}`}\r\n        onClick={handleClick}\r\n      />\r\n\r\n      {isPopupVisible && <PopupMenu handleClose={handleClose}/>}\r\n    </nav>\r\n  );\r\n}\r\n\r\nexport default Navigation;","import React, { useContext } from 'react';\r\nimport Header from '../../Header/Header';\r\nimport NavTab from '../NavTab/NavTab';\r\nimport Navigation from '../../Navigation/Navigation';\r\n\r\nimport { CurrentUserContext } from '../../../contexts/CurrentUserContext';\r\nimport './Promo.css';\r\n\r\nfunction Promo() {\r\n  const currentUser = useContext(CurrentUserContext);\r\n\r\n  return (\r\n    <section className=\"promo promo__block\">\r\n      <Header>\r\n        {currentUser.email ? <Navigation theme=\"blue\"/> : <NavTab />}\r\n      </Header>\r\n\r\n      <div className=\"promo__block promo__container\">\r\n        <h1 className=\"promo__block promo__title\">\r\n          Учебный проект студента факультета Веб-разработки.\r\n        </h1>\r\n        <div className=\"promo__block promo__image\" />\r\n      </div>\r\n    </section>\r\n  );\r\n}\r\n\r\nexport default Promo;","import React from 'react';\r\n\r\nimport './SectionHeader.css';\r\n\r\nconst SectionHeader = (props) => (\r\n  <h2 className=\"SectionHeader gradual-change\">\r\n    {props.children}\r\n  </h2>\r\n);\r\n\r\nexport default SectionHeader;\r\n","import React from 'react';\r\nimport SectionHeader from '../SectionHeader/SectionHeader';\r\n\r\nimport './AboutProject.css';\r\n\r\nconst AboutProject = () => (\r\n  <section className=\"AboutProject gradual-change\">\r\n\r\n    <SectionHeader>О проекте</SectionHeader>\r\n\r\n    <ul className=\"brief gradual-change\">\r\n      <li className=\"brief__column\">\r\n        <h4 className=\"brief__title\">\r\n          Дипломный проект включал 5 этапов\r\n        </h4>\r\n        <p className=\"brief__text\">\r\n          Составление плана, работу над бэкендом, вёрстку,\r\n          добавление функциональности и финальные доработки.\r\n        </p>\r\n      </li>\r\n      <li className=\"brief__column\">\r\n        <h4 className=\"brief__title\">\r\n          На выполнение диплома ушло 5 недель\r\n        </h4>\r\n        <p className=\"brief__text\">\r\n          У каждого этапа был мягкий и жёсткий дедлайн, которые нужно было соблюдать,\r\n          чтобы успешно защититься.\r\n        </p>\r\n      </li>\r\n    </ul>\r\n\r\n    <div className=\"schedule gradual-change\">\r\n      <p className=\"schedule__text schedule__chart schedule__chart_green\">\r\n        1 неделя\r\n      </p>\r\n      <p className=\"schedule__text schedule__chart schedule__chart_gray\">\r\n        4 недели\r\n      </p>\r\n      <p className=\"schedule__text schedule__item\">\r\n        Back-end\r\n      </p>\r\n      <p className=\"schedule__text schedule__item\">\r\n        Front-end\r\n      </p>\r\n    </div>\r\n\r\n  </section>\r\n);\r\n\r\nexport default AboutProject;\r\n","import React from 'react';\r\n\r\nimport './SectionTitle.css';\r\n\r\nconst SectionTitle = (props) => (\r\n  <h3 className=\"SectionTitle gradual-change\">\r\n    {props.children}\r\n  </h3>\r\n);\r\n\r\nexport default SectionTitle;\r\n","import React from 'react';\r\nimport SectionHeader from '../SectionHeader/SectionHeader';\r\nimport SectionTitle from '../SectionTitle/SectionTitle';\r\n\r\nimport './Techs.css';\r\n\r\nconst Techs = () => (\r\n  <section className=\"Techs gradual-change\">\r\n\r\n    <SectionHeader>Технологии</SectionHeader>\r\n\r\n    <div className=\"techs__container gradual-change\">\r\n\r\n      <SectionTitle>7 технологий</SectionTitle>\r\n\r\n      <p className=\"techs__subtitle\">\r\n        На курсе веб-разработки мы освоили технологии,\r\n        которые применили в дипломном проекте.\r\n      </p>\r\n\r\n      <ul className=\"techs__list\">\r\n        <li className=\"techs__item\">HTML</li>\r\n        <li className=\"techs__item\">CSS</li>\r\n        <li className=\"techs__item\">JS</li>\r\n        <li className=\"techs__item\">React</li>\r\n        <li className=\"techs__item\">Git</li>\r\n        <li className=\"techs__item\">Express.js</li>\r\n        <li className=\"techs__item\">mongoDB</li>\r\n      </ul>\r\n\r\n    </div>\r\n\r\n  </section>\r\n);\r\n\r\nexport default Techs;\r\n","import React from 'react';\r\n\r\nimport './Portfolio.css';\r\n\r\nconst Portfolio = () => (\r\n  <section className=\"Portfolio portfolio__box gradual-change\">\r\n    <h4 className=\"portfolio__box portfolio__title\">Портфолио</h4>\r\n\r\n    <ul className=\"portfolio__box projects__list\">\r\n      <li className=\"portfolio__box projects__item\">\r\n        <p className=\"portfolio__box projects__info\">\r\n          Статичный сайт\r\n        </p>\r\n        <a\r\n          className=\"projects__link\"\r\n          href=\"https://github.com/kateworks/how-to-learn\"\r\n          target=\"_blank\" rel=\"noreferrer noopener\"\r\n        >\r\n          ↗\r\n        </a>\r\n      </li>\r\n\r\n      <li className=\"portfolio__box projects__item\">\r\n        <p className=\"portfolio__box projects__info\">\r\n          Адаптивный сайт\r\n        </p>\r\n        <a\r\n          className=\"projects__link\"\r\n          href=\"https://github.com/kateworks/russian-travel\"\r\n          target=\"_blank\" rel=\"noreferrer noopener\"\r\n        >\r\n          ↗\r\n        </a>\r\n      </li>\r\n\r\n      <li className=\"portfolio__box projects__item\">\r\n        <p className=\"portfolio__box projects__info\">\r\n          Одностраничное приложение\r\n        </p>\r\n        <a\r\n          className=\"projects__link\"\r\n          href=\"https://github.com/kateworks/mesto\"\r\n          target=\"_blank\" rel=\"noreferrer noopener\"\r\n        >\r\n          ↗\r\n        </a>\r\n      </li>\r\n    </ul>\r\n  </section>\r\n);\r\n\r\nexport default Portfolio;\r\n\r\n","export default __webpack_public_path__ + \"static/media/my-photo.d7fbeb2b.jpg\";","import React from 'react';\r\nimport SectionHeader from '../SectionHeader/SectionHeader';\r\nimport SectionTitle from '../SectionTitle/SectionTitle';\r\nimport Portfolio from '../Portfolio/Portfolio';\r\n\r\nimport personPhoto from '../../../images/my-photo.jpg';\r\nimport './AboutMe.css';\r\n\r\nconst AboutMe = () => (\r\n  <section className=\"AboutMe gradual-change\">\r\n\r\n    <SectionHeader>Студент</SectionHeader>\r\n\r\n    <article className=\"person gradual-change\">\r\n      <div className=\"person__info\">\r\n        <SectionTitle>Екатерина</SectionTitle>\r\n\r\n        <p className=\"person__subtitle\">\r\n          Фронтенд-разработчик\r\n        </p>\r\n\r\n        <p className=\"person__text\">\r\n          Я родилась и выросла в Барнауле, закончила АлтГТУ им.И.И.Ползунова\r\n          по специальности \"Программное обеспечение вычислительной техники\".\r\n          В настоящее время живу в Ленинградской области (д.Пеники). Прошла курс\r\n          Яндекс.Практикума по веб-разработке. Ищу работу front-end разработчика,\r\n          чтобы применить полученные знания, решая нестандартные и серьезные задачи.\r\n        </p>\r\n\r\n        <ul className=\"person__list\">\r\n          <li className=\"person__item\">\r\n            <a className=\"person__link\"\r\n              href=\"https://www.facebook.com\"\r\n              target=\"_blank\" rel=\"noreferrer noopener\"\r\n            >\r\n              Facebook\r\n            </a>\r\n          </li>\r\n          <li className=\"person__item\">\r\n            <a className=\"person__link\"\r\n              href=\"https://github.com/kateworks\"\r\n              target=\"_blank\" rel=\"noreferrer noopener\"\r\n            >\r\n              Github\r\n            </a>\r\n          </li>\r\n        </ul>\r\n      </div>\r\n\r\n      <img\r\n        className=\"person__photo\"\r\n        src={personPhoto}\r\n        alt=\"Фотография студента\"\r\n      />\r\n    </article>\r\n\r\n    <Portfolio />\r\n  </section>\r\n);\r\n\r\nexport default AboutMe;\r\n","import React from 'react';\r\nimport Promo from './Promo/Promo';\r\nimport AboutProject from './AboutProject/AbouProject';\r\nimport Techs from './Techs/Techs';\r\nimport AboutMe from './AboutMe/AboutMe';\r\n\r\nimport './Landing.css';\r\n\r\nconst Landing = () => (\r\n  <div className=\"Landing\">\r\n    <Promo/>\r\n    <AboutProject/>\r\n    <Techs/>\r\n    <AboutMe/>\r\n  </div>\r\n);\r\n\r\nexport default Landing;","import React from 'react';\r\nimport './Footer.css';\r\n\r\nconst Footer = () => (\r\n  <footer className=\"Footer\">\r\n\r\n    <p className=\"footer__title footer__text\">\r\n      Учебный проект Яндекс.Практикум х BeatFilm.\r\n    </p>\r\n\r\n    <div className=\"footer__row\">\r\n      <p className=\"footer__copyright footer__text\">&#169; 2021</p>\r\n      <nav>\r\n        <ul className=\"footer__row-links\">\r\n\r\n          <li className=\"footer__row-link\">\r\n            <a className=\"footer__link footer__text\"\r\n              href=\"https://praktikum.yandex.ru\"\r\n              target=\"_blank\" rel=\"noreferrer noopener\"\r\n            >\r\n              Яндекс.Практикум\r\n            </a>\r\n          </li>\r\n\r\n          <li className=\"footer__row-link\">\r\n            <a className=\"footer__link footer__text\"\r\n              href=\"https://github.com\"\r\n              target=\"_blank\" rel=\"noreferrer noopener\"\r\n            >\r\n              Github\r\n            </a>\r\n          </li>\r\n\r\n          <li className=\"footer__row-link\">\r\n            <a className=\"footer__link footer__text\"\r\n              href=\"https://www.facebook.com\"\r\n              target=\"_blank\" rel=\"noreferrer noopener\"\r\n            >\r\n              Facebook\r\n            </a>\r\n          </li>\r\n\r\n        </ul>\r\n      </nav>\r\n    </div>\r\n  </footer>\r\n);\r\n\r\nexport default Footer;\r\n","import React from 'react';\r\nimport Landing from '../components/Landing/Landing';\r\nimport Footer from '../components/Footer/Footer';\r\n\r\nconst HomePage = () => (\r\n  <React.Fragment>\r\n    <Landing/>\r\n    <Footer/>\r\n  </React.Fragment>\r\n);\r\n\r\nexport default HomePage;","import React from 'react';\r\nimport './Form.css';\r\n\r\nconst Form = ({ name, title, children, onSubmit }) => (\r\n  <form className=\"form gradual-change\" name={name} onSubmit={onSubmit}>\r\n    <h2 className=\"form__title gradual-change\">\r\n      {title}\r\n    </h2>\r\n    {children}\r\n  </form>\r\n);\r\n\r\nexport default Form;","import React from 'react';\r\nimport './Input.css';\r\n\r\nconst Input = ({ type, isError, errorText, errorId, children, ...rest}) => (\r\n  <div className=\"input input__box\">\r\n    <label className=\"input__label input__box\">\r\n      {children}\r\n    </label>\r\n\r\n    <input type={type}\r\n      className=\"input__item input__box\"\r\n      {...rest}\r\n    />\r\n\r\n    <span\r\n      className={`input__error input__box ${isError ? 'input__error_visible' : ''}`}\r\n      id={errorId}\r\n    >\r\n      {errorText}\r\n    </span>\r\n  </div>\r\n);\r\n\r\nexport default Input;\r\n","import React from 'react';\r\nimport Button from '../Button/Button';\r\nimport './SubmitButton.css';\r\n\r\nconst SubmitButton = ({ submitDisabled, children }) => (\r\n  <Button\r\n    type=\"submit\"\r\n    userClass=\"submit-btn\"\r\n    disabled={submitDisabled}\r\n  >\r\n    {children}\r\n  </Button>\r\n);\r\n\r\nexport default SubmitButton;","import React from 'react';\r\nimport { Link } from 'react-router-dom';\r\n\r\nimport SubmitButton from '../SubmitButton/SubmitButton';\r\nimport './SubmitGroup.css';\r\n\r\nconst SubmitGroup = (props) => (\r\n  <fieldset className=\"submit-group\">\r\n    <p className=\"submit-group__error submit-group__box\">\r\n      {props.errorMessage || ''}\r\n    </p>\r\n\r\n    <SubmitButton submitDisabled={props.submitDisabled}>\r\n      {props.submitName}\r\n    </SubmitButton>\r\n\r\n    <nav className=\"submit-group__row submit-group__box\">\r\n      <span className=\"submit-group__text submit-group__box submit-group__font\">\r\n        {props.children}\r\n      </span>\r\n\r\n      <Link\r\n        to={props.linkDestination}\r\n        className=\"submit-group__link submit-group__box submit-group__font\"\r\n      >\r\n        {props.linkName}\r\n      </Link>\r\n    </nav>\r\n  </fieldset>\r\n);\r\n\r\nexport default SubmitGroup;","import { useState, useCallback } from 'react';\r\n\r\nexport function useFormWithValidation() {\r\n  const [values, setValues] = useState({});\r\n  const [errors, setErrors] = useState({});\r\n  const [isValid, setIsValid] = useState(false);\r\n\r\n  const handleChange = (event) => {\r\n    const target = event.target;\r\n    const { name, value } = target;\r\n    setValues({...values, [name]: value});\r\n    setErrors({...errors, [name]: target.validationMessage });\r\n    setIsValid(target.closest(\"form\").checkValidity());\r\n  };\r\n\r\n  const resetForm = useCallback(\r\n    (newValues = {}, newErrors = {}, newIsValid = false) => {\r\n      setValues(newValues);\r\n      setErrors(newErrors);\r\n      setIsValid(newIsValid);\r\n    },\r\n    [setValues, setErrors, setIsValid]\r\n  );\r\n\r\n  return { values, setValues, handleChange, errors, isValid, resetForm };\r\n}\r\n\r\n\r\n","import React, { useEffect, useState } from 'react';\r\nimport Form from '../../components/Form/Form';\r\nimport Logo from '../../components/Logo/Logo';\r\nimport Input from '../../components/Input/Input';\r\nimport SubmitGroup from '../../components/SubmitGroup/SubmitGroup';\r\nimport { useFormWithValidation } from '../../hooks/useFormWithValidation';\r\nimport './Login.css';\r\n\r\nfunction Login(props) {\r\n  const { values, handleChange, errors, isValid, resetForm } = useFormWithValidation();\r\n  const [errorMessage, setErrorMessage] = useState('');\r\n\r\n  useEffect(() => {\r\n    props.resetMessage();\r\n  }, [values]);\r\n\r\n  useEffect(() => {\r\n    setErrorMessage(props.errorMessage);\r\n  }, [props.errorMessage]);\r\n\r\n  const emptyForm = () => {\r\n    resetForm({ email: '', password: '' });\r\n  }\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    props.onLogin(values.email, values.password, emptyForm);\r\n  }\r\n\r\n  return (\r\n    <div className=\"login\">\r\n      <header className=\"login__header\">\r\n        <Logo />\r\n      </header>\r\n\r\n      <Form name=\"form-login\" title=\"Рады видеть!\" onSubmit={handleSubmit}>\r\n        <Input\r\n          type=\"email\"\r\n          id=\"email\" name=\"email\"\r\n          placeholder=\"E-mail\" required\r\n          pattern=\"^([\\w.%+-]+)@([\\w-]+\\.)+([\\w]{2,})$\"\r\n          errorId=\"email-error\"\r\n          isError={errors.email} errorText={errors.email}\r\n          onChange={handleChange}\r\n          value={values.email || ''}\r\n        >\r\n          E-mail\r\n        </Input>\r\n\r\n        <Input\r\n          type=\"password\"\r\n          id=\"password\" name=\"password\"\r\n          maxLength=\"20\" minLength=\"8\"\r\n          placeholder=\"Пароль\" required\r\n          errorId=\"password-error\"\r\n          isError={errors.password} errorText={errors.password}\r\n          onChange={handleChange}\r\n          value={values.password || ''}\r\n        >\r\n          Пароль\r\n        </Input>\r\n\r\n        <SubmitGroup\r\n          submitName=\"Войти\"\r\n          linkName=\"Регистрация\"\r\n          linkDestination=\"/signup\"\r\n          submitDisabled={!isValid}\r\n          errorMessage={errorMessage}\r\n        >\r\n          Ещё не зарегистрированы?\r\n        </SubmitGroup>\r\n      </Form>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Login;","import React, { useEffect, useState } from 'react';\r\nimport Form from '../components/Form/Form';\r\nimport Logo from '../components/Logo/Logo';\r\nimport Input from '../components/Input/Input';\r\nimport SubmitGroup from '../components/SubmitGroup/SubmitGroup';\r\nimport { useFormWithValidation } from '../hooks/useFormWithValidation';\r\nimport './Login/Login.css';\r\n\r\nfunction Register(props) {\r\n  const { values, handleChange, errors, isValid, resetForm } = useFormWithValidation();\r\n  const [errorMessage, setErrorMessage] = useState('');\r\n\r\n  useEffect(() => {\r\n    props.resetMessage();\r\n  }, [values]);\r\n\r\n  useEffect(() => {\r\n    setErrorMessage(props.errorMessage);\r\n  }, [props.errorMessage]);\r\n\r\n  const emptyForm = () => {\r\n    resetForm({ name: '', email: '', password: '' });\r\n  }\r\n\r\n  const handleSubmit = (event) => {\r\n    event.preventDefault();\r\n    props.onRegister(values.email, values.password, values.name, emptyForm);\r\n  };\r\n\r\n  return (\r\n    <div className=\"login\">\r\n      <header className=\"login__header\">\r\n        <Logo />\r\n      </header>\r\n\r\n      <Form name=\"form-register\" title=\"Добро пожаловать!\" onSubmit={handleSubmit}>\r\n        <Input type=\"text\"\r\n          id=\"name\" name=\"name\"\r\n          maxLength=\"30\" minLength=\"2\"\r\n          placeholder=\"Имя\" required\r\n          pattern=\"^[A-Za-z]([A-Za-z]| |-){1,28}[A-Za-z]$\"\r\n          errorId=\"name-error\"\r\n          isError={errors.name} errorText={errors.name}\r\n          onChange={handleChange}\r\n          value={values.name || ''}\r\n        >\r\n          Имя\r\n        </Input>\r\n\r\n        <Input type=\"email\"\r\n          id=\"email\" name=\"email\"\r\n          placeholder=\"E-mail\" required\r\n          pattern=\"^([\\w.%+-]+)@([\\w-]+\\.)+([\\w]{2,})$\"\r\n          errorId=\"email-error\"\r\n          isError={errors.email} errorText={errors.email}\r\n          onChange={handleChange}\r\n          value={values.email || ''}\r\n        >\r\n          E-mail\r\n        </Input>\r\n\r\n        <Input\r\n          type=\"password\"\r\n          id=\"password\" name=\"password\"\r\n          maxLength=\"20\" minLength=\"8\"\r\n          placeholder=\"Пароль\" required\r\n          errorId=\"password-error\"\r\n          isError={errors.password} errorText={errors.password}\r\n          onChange={handleChange}\r\n          value={values.password || ''}\r\n        >\r\n          Пароль\r\n        </Input>\r\n\r\n        <SubmitGroup\r\n          submitName=\"Зарегистрироваться\"\r\n          linkName=\"Войти\"\r\n          linkDestination=\"/signin\"\r\n          submitDisabled={!isValid}\r\n          errorMessage={errorMessage}\r\n        >\r\n          Уже зарегистрированы?\r\n        </SubmitGroup>\r\n      </Form>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Register;\r\n","//--------------------------------------------------------------------------------------\r\n// Модуль MainApi.js\r\n// Класс MainApi\r\n//--------------------------------------------------------------------------------------\r\nimport { BASE_URL } from './Auth';\r\n\r\nclass MainApi {\r\n  constructor({ baseUrl, headers }) {\r\n    this._baseUrl = baseUrl;\r\n    this._headers = headers;\r\n  }\r\n\r\n  _handleResponse(res) {\r\n    if (res.ok) return res.json();\r\n    return Promise.reject(res.status);\r\n  }\r\n\r\n  getUserInfo() {\r\n    return fetch(`${this._baseUrl}/users/me`, {\r\n      method: 'GET',\r\n      headers: this.getHeaders()\r\n    })\r\n    .then(res => this._handleResponse(res));\r\n  }\r\n\r\n  patchUserProfile(data) {\r\n    return fetch(`${this._baseUrl}/users/me`, {\r\n      method: 'PATCH',\r\n      headers: this.getHeaders(),\r\n      body: JSON.stringify({name: data.name, email: data.email})\r\n    })\r\n    .then(res => this._handleResponse(res));\r\n  }\r\n\r\n  getMovies() {\r\n    return fetch(`${this._baseUrl}/movies`, {\r\n      method: 'GET',\r\n      headers: this.getHeaders()\r\n    })\r\n    .then(res => this._handleResponse(res));\r\n  }\r\n\r\n  postNewMovie(item) {\r\n    return fetch(`${this._baseUrl}/movies`, {\r\n      method: 'POST',\r\n      headers: this.getHeaders(),\r\n      body: JSON.stringify(item)\r\n    })\r\n    .then(res => this._handleResponse(res));\r\n  }\r\n\r\n  deleteMovie(movieId) {\r\n    return fetch(`${this._baseUrl}/movies/${movieId}`, {\r\n      method: 'DELETE',\r\n      headers: this.getHeaders()\r\n    })\r\n    .then(res => this._handleResponse(res));\r\n  }\r\n\r\n  getHeaders() {\r\n    const token = localStorage.getItem('jwt');\r\n    return {\r\n      ...this._headers,\r\n      'Authorization': `Bearer ${token}`,\r\n    }\r\n  }\r\n}\r\n\r\nconst mainApi = new MainApi({\r\n  baseUrl: BASE_URL,\r\n  headers: {\r\n    'Accept': 'application/json',\r\n    'Content-Type': 'application/json'\r\n  }\r\n});\r\n\r\nexport default mainApi;\r\n","import React, { useState, useContext, useEffect } from 'react';\r\nimport Button from '../Button/Button';\r\n\r\nimport { CurrentUserContext } from '../../contexts/CurrentUserContext';\r\nimport { useFormWithValidation } from '../../hooks/useFormWithValidation';\r\nimport mainApi from '../../utils/MainApi';\r\n\r\nimport './Profile.css';\r\n\r\nfunction Profile(props) {\r\n  const currentUser = useContext(CurrentUserContext);\r\n  const { values, handleChange, errors, isValid, resetForm } = useFormWithValidation();\r\n\r\n  const [isSubmitDisabled, setIsSubmitDisabled] = useState(true);\r\n  const [serverErrorMessage, setServerErrorMessage] = useState('');\r\n  const [errorMessage, setErrorMessage] = useState('');\r\n\r\n  useEffect(() => {\r\n    resetForm({ name: currentUser.name, email: currentUser.email });\r\n  }, [currentUser]);\r\n\r\n  useEffect(() => {\r\n    setServerErrorMessage('');\r\n  }, [values]);\r\n\r\n  useEffect(() => {\r\n    const condition1 =\r\n      (values.name === currentUser.name) &&\r\n      (values.email === currentUser.email);\r\n\r\n    const condition2 = (\r\n      (values.name !== currentUser.name) ||\r\n      (values.email !== currentUser.email)\r\n    ) && !isValid;\r\n\r\n    setIsSubmitDisabled(condition1 || condition2);\r\n  }, [values, currentUser, isValid]);\r\n\r\n  // Ошибки ввода данных\r\n  useEffect(() => {\r\n    const msgName = errors.name ? `Имя: ${errors.name}` : '';\r\n    const msgEmail = errors.email ? `Почта: ${errors.email}` : '';\r\n    setErrorMessage(`${msgName} ${msgEmail}`);\r\n  }, [errors]);\r\n\r\n  // Сохранение изменений\r\n  const handleSubmit = (event) => {\r\n    event.preventDefault();\r\n    setServerErrorMessage('Сохранение...');\r\n\r\n    mainApi.patchUserProfile(values)\r\n      .then((data) => {\r\n        setServerErrorMessage('Информация о пользователе сохранена.');\r\n        currentUser.name = data.name;\r\n        currentUser.email = data.email;\r\n        resetForm({ name: currentUser.name, email: currentUser.email });\r\n        setTimeout(() => setServerErrorMessage(''), 1000);\r\n      })\r\n      .catch((err) => {\r\n        switch (err) {\r\n          case 400:\r\n            setServerErrorMessage(\"Некорректное значение одного или нескольких полей\");\r\n            break;\r\n          case 409:\r\n            setServerErrorMessage(`Пользователь ${values.email} уже существует.`);\r\n            break;\r\n          default:\r\n            setServerErrorMessage(`Невозможно сохранить данные на сервере. Ошибка ${err}.`);\r\n          }\r\n      });\r\n  };\r\n\r\n  return (\r\n    <section className=\"profile\">\r\n      <form\r\n        className=\"profile__form profile__box gradual-change\"\r\n        onSubmit={handleSubmit}\r\n      >\r\n        <h2 className=\"profile__title profile__box\">\r\n          Привет, {currentUser.name}!\r\n        </h2>\r\n\r\n        <fieldset className=\"profile__fields profile__box\">\r\n          <label htmlFor=\"name\" className=\"profile__label profile__text\">\r\n            Имя\r\n          </label>\r\n\r\n          <input type=\"text\"\r\n            id=\"name\" name=\"name\"\r\n            className={`profile__item profile__text ${errors.name ? 'profile__text_error' : ''}`}\r\n            placeholder=\"Имя\"\r\n            pattern=\"^[A-Za-z]([A-Za-z]| |-){1,28}[A-Za-z]$\"\r\n            onChange={handleChange}\r\n            value={values.name || ''} required\r\n          />\r\n\r\n          <label htmlFor=\"email\" className=\"profile__label profile__text\">\r\n            Почта\r\n          </label>\r\n\r\n          <input type=\"email\"\r\n            id=\"email\" name=\"email\"\r\n            className={`profile__item profile__text ${errors.email ? 'profile__text_error' : ''}`}\r\n            placeholder=\"Почта\"\r\n            pattern=\"^([\\w.%+-]+)@([\\w-]+\\.)+([\\w]{2,})$\"\r\n            onChange={handleChange}\r\n            value={values.email || ''} required\r\n          />\r\n        </fieldset>\r\n\r\n        <p className=\"profile__error profile__box profile__error_input\">\r\n          {errorMessage}\r\n        </p>\r\n\r\n        <fieldset className=\"profile__buttons profile__box\">\r\n          <p className=\"profile__error profile__box\">\r\n            {serverErrorMessage}\r\n          </p>\r\n\r\n          <Button type=\"submit\" userClass=\"profile__btn\" disabled={isSubmitDisabled}>\r\n            Редактировать\r\n          </Button>\r\n\r\n          <Button userClass=\"profile__btn profile__btn_red\" onClick={props.onLogout}>\r\n            Выйти из аккаунта\r\n          </Button>\r\n        </fieldset>\r\n      </form>\r\n    </section>\r\n  );\r\n}\r\n\r\nexport default Profile;","import React from 'react';\r\nimport Header from '../components/Header/Header';\r\nimport Navigation from '../components/Navigation/Navigation';\r\nimport Profile from '../components/Profile/Profile';\r\n\r\nconst ProfilePage = (props) => (\r\n  <React.Fragment>\r\n    <Header>\r\n      <Navigation/>\r\n    </Header>\r\n\r\n    <Profile onLogout={props.onLogout}/>\r\n  </React.Fragment>\r\n);\r\n\r\nexport default ProfilePage;","import React from 'react';\r\nimport './RoundSwitch.css';\r\n\r\nconst RoundSwitch = (props) => (\r\n  <label className=\"switch\">\r\n    <input\r\n      type=\"checkbox\"\r\n      className=\"switch__input\"\r\n      checked={props.isChecked}\r\n      onChange={props.onChange}\r\n      disabled={props.isDisabled}\r\n    />\r\n\r\n    <span className=\"switch__slider\"/>\r\n  </label>\r\n);\r\n\r\nexport default RoundSwitch;\r\n","\r\nexport const NOT_FOUND_ERR_TEXT = `Ничего не найдено`;\r\nexport const SAVED_FILMS_API_TEXT = 'Невозможно прочитать сохраненные фильмы';\r\nexport const SAVE_FILM_ERR_TEXT = 'Ошибка при сохранении/удалении фильма';\r\n\r\nexport const KEY_WORD_ERROR = 'Нужно ввести ключевое слово (название, режиссер, страна или год)';\r\nexport const DELETE_ERROR = 'Ошибка при удалении карточки';\r\n\r\nexport const NOT_FOUND_ERR_BLOCK = <p className=\"list__no-result\">{NOT_FOUND_ERR_TEXT}</p>;\r\nexport const SAVED_FILMS_API_BLOCK = <p className=\"list__no-result\">{SAVED_FILMS_API_TEXT}</p>;\r\n\r\nexport const SHORT_FILM_DURATION = 40;\r\n","import React, { useEffect, useState } from 'react';\r\nimport Button from '../Button/Button';\r\nimport RoundSwitch from '../RoundSwitch/RoundSwitch';\r\nimport { KEY_WORD_ERROR } from '../../utils/Const';\r\nimport './SearchForm.css';\r\n\r\nfunction SearchForm(props) {\r\n  const [searchString, setSearchString] = useState('');\r\n  const [errorMessage, setErrorMessage] = useState('');\r\n\r\n  useEffect(() => {\r\n    setErrorMessage('');\r\n  }, [searchString]);\r\n\r\n  const handleSwitchChange = () => {\r\n    props.onSwitchChange();\r\n  };\r\n\r\n  const handleStringChange = (event) => {\r\n    setSearchString(event.target.value);\r\n  };\r\n\r\n  const handleSubmit = (event) => {\r\n    event.preventDefault();\r\n    if (!searchString && !props.savedFilms) {\r\n      setErrorMessage(KEY_WORD_ERROR);\r\n      return;\r\n    }\r\n    props.onSubmit(searchString);\r\n  };\r\n\r\n  return (\r\n    <div className=\"search gradual-change\">\r\n\r\n      <form name='search-form'\r\n        className='search__form search__box'\r\n        onSubmit={handleSubmit}\r\n      >\r\n        <fieldset className=\"search__input-box search__box\">\r\n          <input\r\n            type=\"text\"\r\n            id=\"search-input\" name=\"search-input\"\r\n            className=\"search__input search__box\"\r\n            placeholder=\"Фильм\"\r\n            value={searchString} onChange={handleStringChange}\r\n          />\r\n\r\n          <Button type=\"submit\" userClass=\"search__button\" />\r\n        </fieldset>\r\n\r\n        <fieldset className=\"search__switch-box search__box\">\r\n          <div className=\"search__line search__box\" />\r\n\r\n          <RoundSwitch\r\n            isChecked={props.isSwitchOn || false}\r\n            onChange={handleSwitchChange}\r\n            isDisabled={props.isSwitchDisabled}\r\n          />\r\n\r\n          <p className=\"search__switch-name search__box\">\r\n            Короткометражки\r\n          </p>\r\n        </fieldset>\r\n      </form>\r\n\r\n      <p className=\"search__input_error search__box\">\r\n        {errorMessage}\r\n      </p>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default SearchForm;","import React from 'react';\r\nimport './Preloader.css';\r\n\r\nconst Preloader = () => {\r\n  return (\r\n    <div className=\"Preloader\"/>\r\n  );\r\n};\r\n\r\nexport default Preloader;","import React from 'react';\r\nimport './MoviesCard.css';\r\n\r\nfunction MoviesCard({ movie, children, onClick }) {\r\n\r\n  const getMovieDuration = (duration) => {\r\n    const hours = Math.floor(duration / 60);\r\n    const hoursStr = hours > 0 ? `${hours}ч` : '';\r\n    const minutes = duration - hours * 60;\r\n    const minutesStr = minutes > 0 ? `${minutes}м` : '';\r\n    return hoursStr + minutesStr;\r\n  };\r\n\r\n  const handleClick = () => {\r\n    onClick(movie);\r\n  };\r\n\r\n  return (\r\n    <li className=\"card gradual-change\">\r\n      <div className=\"card__wrapper\">\r\n        <img\r\n          className=\"card__image\"\r\n          src={movie.image}\r\n          alt={movie.nameRU}\r\n          onClick={handleClick}\r\n        />\r\n      </div>\r\n\r\n      <ul className=\"card__info\">\r\n        <li className=\"card__name\">{movie.nameRU}</li>\r\n        <li>\r\n          {children}\r\n        </li>\r\n        <li className=\"card__duration\">{getMovieDuration(movie.duration)}</li>\r\n      </ul>\r\n    </li>\r\n  );\r\n}\r\n\r\nexport default MoviesCard;","import React from 'react';\r\nimport './RoundCheckBox.css';\r\n\r\nconst RoundCheckBox = (props) => {\r\n\r\n  const handleChange = () => {\r\n    props.onChange(props.movieId);\r\n  };\r\n\r\n  return (\r\n    <label className=\"round-btn\">\r\n      <input\r\n        className=\"round-btn__input\"\r\n        type=\"checkbox\"\r\n        checked={props.isChecked || false}\r\n        onChange={handleChange}\r\n      />\r\n\r\n      <span className=\"round-btn__checkmark\"/>\r\n    </label>\r\n  );\r\n}\r\n\r\nexport default RoundCheckBox;\r\n\r\n","import React from 'react';\r\nimport Preloader from '../Preloader/Preloader';\r\nimport MoviesCard from '../MoviesCard/MoviesCard';\r\nimport RoundCheckBox from '../RoundCheckBox/RoundCheckBox';\r\nimport Button from '../Button/Button';\r\n\r\nimport './MoviesCardList.css';\r\n\r\nfunction DeleteButton(props) {\r\n\r\n  const handleDelete = () => {\r\n    props.onDelete(props.movie);\r\n  };\r\n\r\n  return (\r\n    <Button userClass=\"saved-movies__btn_delete\" onClick={handleDelete}/>\r\n  );\r\n}\r\n\r\nfunction MoviesCardList(props) {\r\n\r\n  const handleChange = (movieId) => {\r\n    props.onSave(movieId);\r\n  };\r\n\r\n  const handleDelete = (movie) => {\r\n    props.onDelete(movie);\r\n  };\r\n\r\n  const getMoviesList = (moviesList) => {\r\n    if (moviesList.length > 0) {\r\n      return moviesList.map((moviesCard) => (\r\n        <MoviesCard\r\n          key={moviesCard.movieId} movie={moviesCard}\r\n          onClick={props.onClick}\r\n        >\r\n          { props.savedFilms ?\r\n            <DeleteButton\r\n              onDelete={handleDelete}\r\n              movie={moviesCard}\r\n            /> :\r\n            <RoundCheckBox\r\n              isChecked={moviesCard.saved}\r\n              movieId={moviesCard.movieId}\r\n              onChange={handleChange}\r\n            />\r\n          }\r\n        </MoviesCard>\r\n      ));\r\n    }\r\n    return (\r\n      <li className=\"list__no-result-box\">\r\n        {props.errorMessage}\r\n      </li>\r\n    );\r\n  };\r\n\r\n  return (\r\n    <ul className=\"list gradual-change\">\r\n      {props.isLoading ? <Preloader /> : getMoviesList(props.moviesList) }\r\n    </ul>\r\n  );\r\n}\r\n\r\nexport default MoviesCardList;","//--------------------------------------------------------------------------------------\r\n// Модуль MoviesApi.js\r\n// Класс MoviesApi\r\n//--------------------------------------------------------------------------------------\r\nexport const MOVIES_URL = 'https://api.nomoreparties.co';\r\n\r\nclass MoviesApi {\r\n  constructor({ baseUrl, headers }) {\r\n    this._baseUrl = baseUrl;\r\n    this._headers = headers;\r\n  }\r\n\r\n  _handleResponse(res) {\r\n    if (res.ok) return res.json();\r\n    return Promise.reject(res.status);\r\n  }\r\n\r\n  async getAllMovies() {\r\n    const res = await fetch(`${this._baseUrl}/beatfilm-movies`, {\r\n      method: 'GET',\r\n      headers: this._headers\r\n    });\r\n    return this._handleResponse(res);\r\n  }\r\n}\r\n\r\nconst moviesApi = new MoviesApi({\r\n  baseUrl: MOVIES_URL,\r\n  headers: {\r\n    'Accept': 'application/json',\r\n    'Content-Type': 'application/json'\r\n  }\r\n});\r\n\r\nexport default moviesApi;\r\n","//--------------------------------------------------------------------------------------\r\n// Модуль MoviesSearch.js\r\n// Поиск фильмов\r\n//--------------------------------------------------------------------------------------\r\n\r\nimport moviesApi, { MOVIES_URL } from './MoviesApi';\r\nimport { NOT_FOUND_ERR_BLOCK } from './Const';\r\n\r\n//--------------------------------------------------------------------------------------\r\n// Чтение данных с сервиса beatfilm-movies\r\n\r\nexport const readMovies = async () => {\r\n  try {\r\n    // Ждем'с...\r\n    const movies = await moviesApi.getAllMovies();\r\n\r\n    // Формируем полный список фильмов\r\n    const moviesList = movies.map(movie => {\r\n      return {\r\n        movieId: movie.id,\r\n        country: movie.country || '-',\r\n        director: movie.director || '-',\r\n        duration: movie.duration || 0,\r\n        year: movie.year || '2021',\r\n        description: movie.description || '-',\r\n        image: movie.image ? `${MOVIES_URL}${movie.image.url}` : 'https://fakeimg.pl/300/',\r\n        trailer: movie.trailerLink || 'http://commondatastorage.googleapis.com/gtv-videos-bucket/sample/BigBuckBunny.mp4',\r\n        nameRU: movie.nameRU || '',\r\n        nameEN: movie.nameEN || '',\r\n        thumbnail: movie.image ? `${MOVIES_URL}${movie.image.formats.thumbnail.url}` : 'https://fakeimg.pl/300/',\r\n      };\r\n    });\r\n\r\n    return Promise.resolve(moviesList);\r\n\r\n  } catch(err) {\r\n\r\n    const errMsg = [\r\n      `Во время запроса произошла ошибка.`,\r\n      `Возможно, проблема с соединением или сервер недоступен.`,\r\n      `Подождите немного и попробуйте ещё раз`,\r\n    ];\r\n\r\n    const errString = errMsg.map((item, index) => {\r\n      return <p key={index} className=\"list__no-result\">{item}</p>;\r\n    });\r\n\r\n    return Promise.reject(errString);\r\n  };\r\n};\r\n\r\nconst checkField = (field, searchString) => {\r\n  return field ? field.toLowerCase().includes(searchString) : false;\r\n}\r\n\r\n//--------------------------------------------------------------------------------------\r\n// Выполняем поиск в массиве фильмов\r\n\r\nexport const filterMovies = async (searchString, moviesList) => {\r\n  const string = searchString.toLowerCase();\r\n\r\n  const foundMovies = moviesList.filter((movie) => {\r\n    const c1 = checkField(movie.nameRU, string);\r\n    const c2 = checkField(movie.nameEN, string);\r\n    const c3 = checkField(movie.director, string);\r\n    const c4 = checkField(movie.country, string);\r\n    const c5 = checkField(movie.year, string);\r\n    return (c1 || c2 || c3 || c4 || c5);\r\n  });\r\n\r\n  if (foundMovies.length > 0) return Promise.resolve(foundMovies);\r\n\r\n  return Promise.reject(NOT_FOUND_ERR_BLOCK);\r\n};\r\n\r\nexport const addSavedFlag = (films, savedFilms) => {\r\n  // Просматриваем массив найденных фильмов\r\n  return films.map((film) => {\r\n    const {\r\n      movieId, country, director, duration,\r\n      year, description, image, trailer,\r\n      nameRU, nameEN, thumbnail,\r\n    } = film;\r\n\r\n    // Проверяем, есть ли данный фильм в списке сохраненных\r\n    const saved = savedFilms.filter(savedFilm => savedFilm.movieId === movieId);\r\n\r\n    // Устанавливаем флаг saved в зависимости от результатов поиска\r\n    let savedId = 0;\r\n    if (saved.length === 1) savedId = saved[0]._id;\r\n\r\n    const newFilm = {\r\n      movieId, country, director, duration,\r\n      year, description, image, trailer,\r\n      nameRU, nameEN, thumbnail, saved: savedId,\r\n    };\r\n\r\n    return newFilm;\r\n  });\r\n};\r\n\r\n\r\n","import { useState, useEffect } from 'react';\r\n\r\nfunction getWindowDimensions() {\r\n  const { innerWidth: width, innerHeight: height } = window;\r\n  return { width, height };\r\n}\r\n\r\nexport function useWindowDimensions() {\r\n  const [windowDimensions, setWindowDimensions] = useState(getWindowDimensions());\r\n\r\n  useEffect(() => {\r\n    function handleResize() {\r\n      setWindowDimensions(getWindowDimensions());\r\n    }\r\n\r\n    window.addEventListener('resize', handleResize);\r\n    return () => window.removeEventListener('resize', handleResize);\r\n  }, []);\r\n\r\n  return windowDimensions;\r\n}\r\n\r\nfunction getScreenDimensions() {\r\n  const { width, height } = window.screen;\r\n  return { width, height };\r\n}\r\n\r\nexport function useScreenDimensions() {\r\n  const [screenDimensions] = useState(getScreenDimensions());\r\n  return screenDimensions;\r\n}\r\n","const visibleCardsNumbers = {\r\n  1440: { total: 12, add: 4 },\r\n  1280: { total: 12, add: 3 },\r\n  768: { total: 8, add: 2 },\r\n  480: { total: 5, add: 2 },\r\n};\r\n\r\nexport const getVisualProps = (width) => {\r\n  let point = 0;\r\n  if (width > 1280) {\r\n    point = 1440;\r\n  } else if (width > 1006) {\r\n    point = 1280;\r\n  } else if (width > 646) {\r\n    point = 768;\r\n  } else {\r\n    point = 480;\r\n  };\r\n  return visibleCardsNumbers[point];\r\n};\r\n\r\n\r\n","import React, { useEffect, useState } from 'react';\r\nimport SearchForm from '../SearchForm/SearchForm';\r\nimport MoviesCardList from '../MoviesCardList/MoviesCardList';\r\nimport Button from '../Button/Button';\r\n\r\nimport mainApi from '../../utils/MainApi';\r\nimport { readMovies, filterMovies, addSavedFlag } from '../../utils/MoviesSearch';\r\nimport { useWindowDimensions } from '../../hooks/useDimensions';\r\nimport { getVisualProps } from '../../utils/VisualProps';\r\n\r\nimport {\r\n  NOT_FOUND_ERR_BLOCK, SAVE_FILM_ERR_TEXT, SHORT_FILM_DURATION\r\n} from '../../utils/Const';\r\nimport './Movies.css';\r\n\r\nfunction Movies() {\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [isMoreVisible, setIsMoreVisible] = useState(false);\r\n  const [isSwitchOn, setIsSwitchOn] = useState(false);\r\n  const [isSwitchDisabled, setIsSwitchDisabled] = useState(true);\r\n\r\n  const [savedMovies, setSavedMovies] = useState([]);\r\n  const [foundMovies, setFoundMovies] = useState([]);\r\n  const [showedMovies, setShowedMovies] = useState([]);\r\n  const [findErrorMessage, setFindErrorMessage] = useState('');\r\n\r\n  const { width } = useWindowDimensions();\r\n  const [visualProps, setVisualProps] = useState({total: 12, add: 3});\r\n  const [visibleCardsNumber, setVisibleCardsNumber] = useState(0);\r\n\r\n  useEffect(() => {\r\n    let found, foundChecked;\r\n    const fromStorage = localStorage.getItem('foundMovies');\r\n    if (fromStorage) {\r\n      found = JSON.parse(fromStorage);\r\n      setFoundMovies(found);\r\n      setIsSwitchDisabled(found.length === 0);\r\n    }\r\n\r\n    mainApi.getMovies()\r\n    .then((data) => {\r\n      setSavedMovies(data);\r\n      foundChecked = addSavedFlag(found, data.slice());\r\n      setFoundMovies(foundChecked);\r\n    })\r\n    .catch((err) => {\r\n      console.log(`Нет доступа к сохраненным фильмам: ${err}`);\r\n    });\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    setVisualProps(getVisualProps(width));\r\n  }, [width]);\r\n\r\n  useEffect(() => {\r\n    if (foundMovies.length <= visualProps.total) {\r\n      setVisibleCardsNumber(foundMovies.length);\r\n      setIsMoreVisible(false);\r\n    } else {\r\n      setVisibleCardsNumber(visualProps.total)\r\n      setIsMoreVisible(true);\r\n    }\r\n  }, [foundMovies, visualProps]);\r\n\r\n  useEffect(() => {\r\n    setShowedMovies(foundMovies.slice(0, visibleCardsNumber));\r\n  }, [visibleCardsNumber, foundMovies]);\r\n\r\n  useEffect(() => {\r\n    const fromStorage = localStorage.getItem('foundMovies');\r\n    if (!fromStorage) return;\r\n    const found = JSON.parse(fromStorage);\r\n\r\n    if (isSwitchOn) {\r\n      const foundFilter = found.filter(item => item.duration <= SHORT_FILM_DURATION);\r\n      setFoundMovies(foundFilter);\r\n      if (foundFilter.length === 0) {\r\n        setFindErrorMessage(NOT_FOUND_ERR_BLOCK);\r\n      }\r\n    } else {\r\n      setFoundMovies(found);\r\n    }\r\n  }, [isSwitchOn]);\r\n\r\n  // -------------------------------------------------------------------------------\r\n  // Поиск фильмов\r\n\r\n  const searchMain = async (searchString) => {\r\n    setFoundMovies([]);\r\n    setShowedMovies([]);\r\n    setFindErrorMessage('');\r\n    setIsSwitchOn(false);\r\n    setIsSwitchDisabled(true);\r\n    if (localStorage.getItem('foundMovies')) localStorage.removeItem('foundMovies');\r\n    if (localStorage.getItem('searchString')) localStorage.removeItem('searchString');\r\n\r\n    try {\r\n      setIsLoading(true);\r\n\r\n      // Читаем фильмы с сервиса beatfilm-movies\r\n      const movies = await readMovies();\r\n\r\n      // Выполняем поиск\r\n      const found = await filterMovies(searchString.toLowerCase(), movies);\r\n\r\n      // Добавить признак того, сохранена ли карточка\r\n      const foundChecked = addSavedFlag(found, savedMovies.slice());\r\n      setFoundMovies(foundChecked);\r\n\r\n      localStorage.setItem('foundMovies', JSON.stringify(foundChecked));\r\n      localStorage.setItem('searchString', JSON.stringify(searchString));\r\n      setIsSwitchDisabled(false);\r\n\r\n    } catch (err) {\r\n      setFindErrorMessage(err);\r\n    } finally {\r\n      setIsLoading(false);\r\n    };\r\n  };\r\n\r\n  // Параметр searchString получаем из компонента SearchForm\r\n  const handleSearchSubmit = (searchString) => {\r\n    searchMain(searchString);\r\n  };\r\n\r\n  const handleMoreClick = () => {\r\n    // Определяем количество отображаемых карточек\r\n    let newValue = visibleCardsNumber + visualProps.add;\r\n    let length = foundMovies.length;\r\n\r\n    if (newValue >= length) {\r\n      newValue = length;\r\n      setIsMoreVisible(false);\r\n    }\r\n    setVisibleCardsNumber(newValue);\r\n  };\r\n\r\n  const handleSaveClick = async (movieId) => {\r\n    try {\r\n      // Находим сохраняемый/удаляемый фильм\r\n      const films = foundMovies.filter(currentMovie => currentMovie.movieId === movieId);\r\n      if (films.length !== 1) throw new Error(SAVE_FILM_ERR_TEXT);\r\n\r\n      let newFoundMovies = [];\r\n\r\n      if (films[0].saved === 0) {\r\n        delete films[0].saved;\r\n        const result = await mainApi.postNewMovie(films[0]);\r\n\r\n        const {\r\n          movieId, country, director, duration, year,\r\n          description, image, trailer, nameRU, nameEN,\r\n          thumbnail, _id,\r\n        } = result;\r\n\r\n        const newFilm = {\r\n          movieId, country, director, duration, year,\r\n          description, image, trailer, nameRU, nameEN,\r\n          thumbnail, saved: _id,\r\n        };\r\n\r\n        // Дополняем массивы foundMovies & savedMovies\r\n        newFoundMovies = foundMovies.map((item) => (\r\n          item.movieId === movieId ? newFilm : item\r\n        ));\r\n\r\n        setFoundMovies(newFoundMovies);\r\n\r\n        const newSavedMovies = savedMovies.slice();\r\n        newSavedMovies.push(result);\r\n        setSavedMovies(newSavedMovies);\r\n\r\n      } else {\r\n        const result = await mainApi.deleteMovie(films[0].saved);\r\n\r\n        const {\r\n          movieId, country, director, duration, year,\r\n          description, image, trailer, nameRU, nameEN,\r\n          thumbnail,\r\n        } = result;\r\n\r\n        const newFilm = {\r\n          movieId, country, director, duration, year,\r\n          description, image, trailer, nameRU, nameEN,\r\n          thumbnail, saved: 0,\r\n        };\r\n\r\n        // Дополняем массивы foundMovies & savedMovies\r\n        newFoundMovies = foundMovies.map((item) => (\r\n          item.movieId === movieId ? newFilm : item\r\n        ));\r\n\r\n        setFoundMovies(newFoundMovies);\r\n\r\n        const newSavedMovies = savedMovies.filter((item) => (\r\n          item.movieId !== movieId\r\n        ));\r\n        setSavedMovies(newSavedMovies);\r\n      }\r\n\r\n      if (localStorage.getItem('foundMovies')) localStorage.removeItem('foundMovies');\r\n      localStorage.setItem('foundMovies', JSON.stringify(newFoundMovies));\r\n\r\n    } catch(err) {\r\n      console.log(err);\r\n    }\r\n  };\r\n\r\n  const handleCardClick = (movie) => {\r\n    window.open(movie.trailer, '_blank');\r\n  };\r\n\r\n  const handleSwitchChange = () => {\r\n    setIsSwitchOn(!isSwitchOn);\r\n  };\r\n\r\n  return (\r\n    <section className=\"movies\">\r\n      <SearchForm\r\n        savedFilms={false}\r\n        onSubmit={handleSearchSubmit}\r\n        onSwitchChange={handleSwitchChange}\r\n        isSwitchOn={isSwitchOn}\r\n        isSwitchDisabled={isSwitchDisabled}\r\n      />\r\n\r\n      <MoviesCardList\r\n        savedFilms={false}\r\n        isLoading={isLoading}\r\n        moviesList={showedMovies}\r\n        errorMessage={findErrorMessage}\r\n        onSave={handleSaveClick}\r\n        onClick={handleCardClick}\r\n      />\r\n\r\n      { isMoreVisible ?\r\n        <Button userClass=\"movies__btn_action_more\" onClick={handleMoreClick}>\r\n          Ещё\r\n        </Button> :\r\n        <React.Fragment/>\r\n      }\r\n    </section>\r\n  );\r\n}\r\n\r\nexport default Movies;\r\n","import React from 'react';\r\nimport Header from '../components/Header/Header';\r\nimport Navigation from '../components/Navigation/Navigation';\r\nimport Movies from '../components/Movies/Movies';\r\nimport Footer from '../components/Footer/Footer';\r\n\r\nconst MoviesPage = () => (\r\n  <React.Fragment>\r\n    <Header>\r\n      <Navigation/>\r\n    </Header>\r\n    <Movies/>\r\n    <Footer/>\r\n  </React.Fragment>\r\n);\r\n\r\nexport default MoviesPage;","import React, { useEffect, useState } from 'react';\r\nimport SearchForm from '../SearchForm/SearchForm';\r\nimport MoviesCardList from '../MoviesCardList/MoviesCardList';\r\n\r\nimport mainApi from '../../utils/MainApi';\r\nimport { filterMovies } from '../../utils/MoviesSearch';\r\nimport {\r\n  SAVED_FILMS_API_BLOCK, NOT_FOUND_ERR_BLOCK, SHORT_FILM_DURATION, DELETE_ERROR,\r\n} from '../../utils/Const';\r\n\r\nimport './SavedMovies.css';\r\n\r\nfunction SavedMovies() {\r\n  const [moviesList, setMoviesList] = useState([]);\r\n  const [apiErrorMessage, setApiErrorMessage] = useState('');\r\n  const [visibleMovies, setVisibleMovies] = useState([]);\r\n\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [isSwitchOn, setIsSwitchOn] = useState(false);\r\n  const [isSwitchDisabled, setIsSwitchDisabled] = useState(true);\r\n  const STORAGE_NAME = 'visibleMovies';\r\n\r\n  useEffect(() => {\r\n    setIsLoading(true);\r\n    mainApi.getMovies()\r\n      .then((data) => {\r\n        setMoviesList(data);\r\n        setVisibleMovies(data);\r\n        localStorage.setItem(STORAGE_NAME, JSON.stringify(data));\r\n        setIsSwitchDisabled(data.length === 0);\r\n      })\r\n      .catch((err) => {\r\n        setApiErrorMessage(SAVED_FILMS_API_BLOCK);\r\n      })\r\n      .finally(() => {\r\n        setIsLoading(false);\r\n      });\r\n    return (() => {\r\n      localStorage.removeItem(STORAGE_NAME);\r\n    });\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    let visible = [];\r\n    if (localStorage.getItem(STORAGE_NAME)) {\r\n      visible = JSON.parse(localStorage.getItem(STORAGE_NAME));\r\n    }\r\n\r\n    if (isSwitchOn) {\r\n      const foundFilter = visible.filter(item => item.duration <= SHORT_FILM_DURATION);\r\n      setVisibleMovies(foundFilter);\r\n      if (foundFilter.length === 0) {\r\n        setApiErrorMessage(NOT_FOUND_ERR_BLOCK);\r\n      }\r\n    } else {\r\n      setVisibleMovies(visible);\r\n    }\r\n  }, [isSwitchOn]);\r\n\r\n  const handleCardClick = (movie) => {\r\n    window.open(movie.trailer, '_blank');\r\n  };\r\n\r\n  const handleDeleteClick = (movie) => {\r\n    mainApi.deleteMovie(movie._id)\r\n    .then((deletedMovie) => {\r\n      const newList = moviesList.filter(item => item.movieId !== deletedMovie.movieId);\r\n      setMoviesList(newList);\r\n\r\n      const newVisible = visibleMovies.filter(item => item.movieId !== deletedMovie.movieId);\r\n      setVisibleMovies(newVisible);\r\n      localStorage.setItem(JSON.stringify(newVisible));\r\n\r\n      if (newVisible.length === 0) setApiErrorMessage(NOT_FOUND_ERR_BLOCK);\r\n      setIsSwitchDisabled(newList.length === 0);\r\n    })\r\n    .catch((error) => {\r\n      console.log(`${DELETE_ERROR} ${error}.`);\r\n    });\r\n  };\r\n\r\n  const searchMain = async (searchString) => {\r\n    let found = [];\r\n    setIsLoading(true);\r\n    setIsSwitchDisabled(true);\r\n    setVisibleMovies([]);\r\n    if (localStorage.getItem(STORAGE_NAME)) localStorage.removeItem(STORAGE_NAME);\r\n\r\n    try {\r\n      // Выполняем поиск\r\n      found = await filterMovies(searchString.toLowerCase(), moviesList);\r\n      setVisibleMovies(found);\r\n      setIsSwitchDisabled(false);\r\n    } catch(err) {\r\n      setApiErrorMessage(err);\r\n    } finally {\r\n      setIsLoading(false);\r\n      localStorage.setItem(STORAGE_NAME, JSON.stringify(found));\r\n      setIsSwitchOn(false);\r\n    };\r\n  };\r\n\r\n  // Параметр searchString получаем из компонента SearchForm\r\n  const handleSearchSubmit = (searchString) => {\r\n    const string = searchString || '';\r\n    if (string.length === 0) {\r\n      setIsSwitchOn(false);\r\n      setVisibleMovies(moviesList);\r\n      localStorage.setItem(STORAGE_NAME, JSON.stringify(moviesList));\r\n    } else {\r\n      searchMain(searchString);\r\n    }\r\n  };\r\n\r\n  const handleSwitchChange = () => {\r\n    setIsSwitchOn(!isSwitchOn);\r\n  };\r\n\r\n  return (\r\n    <section className=\"saved-movies gradual-change\">\r\n      <SearchForm\r\n        savedFilms={true}\r\n        onSubmit={handleSearchSubmit}\r\n        onSwitchChange={handleSwitchChange}\r\n        isSwitchOn={isSwitchOn}\r\n        isSwitchDisabled={isSwitchDisabled}\r\n      />\r\n\r\n      <MoviesCardList\r\n        savedFilms={true}\r\n        isLoading={isLoading}\r\n        moviesList={visibleMovies}\r\n        errorMessage={apiErrorMessage}\r\n        onClick={handleCardClick}\r\n        onDelete={handleDeleteClick}\r\n      />\r\n\r\n    </section>\r\n  );\r\n}\r\n\r\nexport default SavedMovies;","import React from 'react';\r\nimport Header from '../components/Header/Header';\r\nimport Navigation from '../components/Navigation/Navigation';\r\nimport SavedMovies from '../components/SavedMovies/SavedMovies';\r\nimport Footer from '../components/Footer/Footer';\r\n\r\nconst SavedMoviesPage = () => (\r\n  <React.Fragment>\r\n    <Header>\r\n      <Navigation/>\r\n    </Header>\r\n    <SavedMovies/>\r\n    <Footer/>\r\n  </React.Fragment>\r\n);\r\n\r\nexport default SavedMoviesPage;","import React from 'react';\r\nimport Button from '../../components/Button/Button';\r\nimport './NotFound.css';\r\n\r\nfunction NotFound({ history }) {\r\n\r\n  const handleClick = () => {\r\n    history.goBack();\r\n  }\r\n\r\n  return (\r\n    <section className=\"not-found gradual-change\">\r\n      <h1 className=\"not-found__title not-found__box gradual-change\">\r\n        404\r\n      </h1>\r\n\r\n      <p className=\"not-found__subtitle not-found__box gradual-change\">\r\n        Страница не найдена\r\n      </p>\r\n\r\n      <Button userClass=\"not-found__button\" onClick={handleClick}>\r\n        Назад\r\n      </Button>\r\n\r\n    </section>\r\n  );\r\n}\r\n\r\nexport default NotFound;","import React, { useState, useEffect } from 'react';\r\nimport { Switch, Route, useHistory } from 'react-router-dom';\r\n\r\nimport { CurrentUserContext } from '../../contexts/CurrentUserContext';\r\nimport * as auth from '../../utils/Auth';\r\nimport ProtectedRoute from '../../components/ProtectedRoute';\r\n\r\nimport HomePage from '../HomePage';\r\nimport Login from '../Login/Login';\r\nimport Register from '../Register';\r\nimport ProfilePage from '../ProfilePage';\r\nimport MoviesPage from '../MoviesPage';\r\nimport SavedMoviesPage from '../SavedMoviesPage';\r\nimport NotFound from '../NotFound/NotFound';\r\n\r\nimport './App.css';\r\n\r\nfunction App() {\r\n  const [loggedIn, setLoggedIn] = useState(false);\r\n  const [currentUser, setCurrentUser] = useState({ email: '', name: '' });\r\n  const [resultMessage, setResultMessage] = useState('');\r\n\r\n  let history = useHistory();\r\n\r\n  const tokenCheck = () => {\r\n    if (localStorage.getItem('jwt')) {\r\n      const jwt = localStorage.getItem('jwt');\r\n      auth.checkToken(jwt)\r\n        .then((res) => {\r\n          if (res) {\r\n            setCurrentUser({ name: res.name, email: res.email });\r\n            setLoggedIn(true);\r\n            history.push('/movies');\r\n          }\r\n        })\r\n        .catch(err => {\r\n          console.log('Переданный токен некорректен.');\r\n          setLoggedIn(false);\r\n        });\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    tokenCheck();\r\n  // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [loggedIn]);\r\n\r\n  // ---------------------------------------------------------------------\r\n  // Авторизация\r\n\r\n  const handleLogin = (userEmail, userPassword, resetLoginForm) => {\r\n    let messageText = '';\r\n\r\n    auth.authorize(userEmail, userPassword)\r\n      .then((data) => {\r\n        if (data.token) {\r\n          localStorage.setItem('jwt', data.token);\r\n          resetLoginForm();\r\n          history.push('/movies');\r\n          setLoggedIn(true);\r\n        }\r\n      })\r\n      .catch(err => {\r\n        switch (err) {\r\n          case 400:\r\n            messageText = \"Некорректное значение одного или нескольких полей\";\r\n            break;\r\n          case 401:\r\n            messageText = `Неверно указаны e-mail или пароль`;\r\n            break;\r\n          default:\r\n            messageText = \"Что-то пошло не так! Попробуйте ещё раз.\";\r\n        }\r\n      })\r\n      .finally(() => {\r\n        setResultMessage(messageText);\r\n      });\r\n  };\r\n\r\n  // ---------------------------------------------------------------------\r\n  // Выход\r\n\r\n  const handleLogout = () => {\r\n    localStorage.removeItem('foundMovies');\r\n    localStorage.removeItem('jwt');\r\n    setLoggedIn(false);\r\n    setCurrentUser({ name: '', email: '' });\r\n    history.push('/');\r\n  };\r\n\r\n  // ---------------------------------------------------------------------\r\n  // Регистрация\r\n\r\n  const handleRegister = (userEmail, userPassword, userName, resetRegisterForm) => {\r\n    let messageText = '';\r\n    auth.register(userEmail, userPassword, userName)\r\n      .then((res) => {\r\n        resetRegisterForm();\r\n        // history.push('/signin');\r\n        //------------------------------------------------------\r\n        auth.authorize(userEmail, userPassword)\r\n          .then((data) => {\r\n            if (data.token) {\r\n              localStorage.setItem('jwt', data.token);\r\n              history.push('/movies');\r\n              setLoggedIn(true);\r\n            }\r\n          })\r\n          .catch((err) => {\r\n            console.log('Переданный токен некорректен.');\r\n            setLoggedIn(false);\r\n          });\r\n        //------------------------------------------------------\r\n      })\r\n      .catch((err) => {\r\n        switch (err) {\r\n          case 400:\r\n            messageText = \"Некорректное значение одного или нескольких полей\";\r\n            break;\r\n          case 409:\r\n            messageText = `Пользователь ${userEmail} уже существует`;\r\n            break;\r\n          default:\r\n            messageText = \"Что-то пошло не так! Попробуйте ещё раз.\";\r\n        }\r\n      })\r\n      .finally(() => {\r\n        setResultMessage(messageText);\r\n      });\r\n  };\r\n\r\n  const resetResultMessage = () => {\r\n    setResultMessage('');\r\n  };\r\n\r\n  return (\r\n    <CurrentUserContext.Provider value={currentUser}>\r\n      <div className=\"App\">\r\n        <Switch>\r\n          <ProtectedRoute path=\"/movies\"\r\n            loggedIn={loggedIn}\r\n            component={MoviesPage}\r\n          />\r\n\r\n          <ProtectedRoute path=\"/saved-movies\"\r\n            loggedIn={loggedIn}\r\n            component={SavedMoviesPage}\r\n          />\r\n\r\n          <ProtectedRoute path=\"/profile\"\r\n            loggedIn={loggedIn}\r\n            component={ProfilePage}\r\n            onLogout={handleLogout}\r\n          />\r\n\r\n          <Route path=\"/signin\">\r\n            <Login onLogin={handleLogin}\r\n              errorMessage={resultMessage}\r\n              resetMessage={resetResultMessage}\r\n              history={history}\r\n            />\r\n          </Route>\r\n\r\n          <Route path=\"/signup\">\r\n            <Register onRegister={handleRegister}\r\n              errorMessage={resultMessage}\r\n              resetMessage={resetResultMessage}\r\n              history={history}\r\n            />\r\n          </Route>\r\n\r\n          <Route exact path=\"/\">\r\n            <HomePage/>\r\n          </Route>\r\n\r\n          <Route path=\"*\">\r\n            <NotFound history={history}/>\r\n          </Route>\r\n        </Switch>\r\n      </div>\r\n    </CurrentUserContext.Provider>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { BrowserRouter } from 'react-router-dom';\r\n\r\nimport App from './pages/App/App';\r\nimport './index.css';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <BrowserRouter basename={process.env.PUBLIC_URL}>\r\n      <App />\r\n    </BrowserRouter>\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n"],"sourceRoot":""}